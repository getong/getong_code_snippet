* flutter protobuf

** install

#+begin_src sh
flutter pub global activate protoc_plugin
#+end_src

** generate proto file into dart source code

mymessage.proto
#+begin_src shell
syntax = "proto3";

package mypackage;

message MyMessage {
  string text = 1;
  int32 number = 2;
}
#+end_src

generate dart code
#+begin_src sh
protoc --dart_out=grpc:lib/ mymessage.proto
#+end_src


** use rust_in_flutter library

*** encode msg

#+begin_src dart
import 'messages/counter_number.pb.dart' as counterNumber;
final requestMessage = counterNumber.ReadRequest(
                letter: "Hello from Dart!",
                beforeNumber: 1,
                dummyOne: 1,
                dummyTwo: counterNumber.SampleSchema(
                  sampleFieldOne: true,
                  sampleFieldTwo: false,
                ),
                dummyThree: [3, 4, 5],
              );
List<int> list = requestMessage.writeToBuffer();
#+end_src

*** decode msg

#+begin_src dart
import 'messages/counter_number.pb.dart' as counterNumber;
List<int> list = requestMessage.writeToBuffer();
final decodeMsg = counterNumber.ReadRequest.fromBuffer(list);

#+end_src